<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Perplexity</title>
<meta name="description" content="An amazing website.">


  <meta name="author" content="Your Name">
  


<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Perplexity">
<meta property="og:title" content="Perplexity">
<meta property="og:url" content="http://blog.inductorsoftware.com/Perplexity/home/pxhowto/pxHowTo30InStylePredications/">


  <meta property="og:description" content="An amazing website.">











  

  


<link rel="canonical" href="http://blog.inductorsoftware.com/Perplexity/home/pxhowto/pxHowTo30InStylePredications/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Your Name",
      "url": "http://blog.inductorsoftware.com/Perplexity/home/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/Perplexity/home/feed.xml" type="application/atom+xml" rel="alternate" title="Perplexity Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/Perplexity/home/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--delphin_page wide">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/Perplexity/home/"><img src="/Perplexity/home/assets/images/Delph-In.png" alt="Perplexity"></a>
        
        <a class="site-title" href="/Perplexity/home/">
          Perplexity
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="https://blog.inductorsoftware.com/Perplexity/home/devhowto/devhowtoOverview">Home</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">Developer Tutorial Overview</span>
        

        
        <ul>
          
            <li><a href="/Perplexity/home/devOverview/">Overview</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">MRS Conceptual</span>
        

        
        <ul>
          
            <li><a href="/Perplexity/home/mrscon/devhowtoMRS/">Minimal Recursion Semantics (MRS)</a></li>
          
            <li><a href="/Perplexity/home/mrscon/devhowto0020WellFormedTree/">Well-Formed Trees</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">MRS Solver Conceptual</span>
        

        
        <ul>
          
            <li><a href="/Perplexity/home/devcon/devcon0000Overview/">Overview</a></li>
          
            <li><a href="/Perplexity/home/devcon/devcon0010MRSSolver/">Backtracking</a></li>
          
            <li><a href="/Perplexity/home/devcon/devcon0020MRSSolverSets/">Representing 'Together'</a></li>
          
            <li><a href="/Perplexity/home/devcon/devcon0030MRSSolverSolutionGroups/">Collective, Distributive, Cumulative</a></li>
          
            <li><a href="/Perplexity/home/devcon/devcon0040MRSSolverSolutionGroupsAlgorithm/">Coll/Dist/Cuml Algorithm</a></li>
          
            <li><a href="/Perplexity/home/devcon/devcon0050MRSSolverSolutionCombinations/">Combinations and Proper Responses</a></li>
          
            <li><a href="/Perplexity/home/devcon/devcon0060WhichParseAndTree/">Choosing a Parse and Tree</a></li>
          
            <li><a href="/Perplexity/home/devcon/devcon0070SentenceForce/">Sentence Types</a></li>
          
            <li><a href="/Perplexity/home/devcon/devcon0080ErrorsChoosingWhichFailure/">Choosing a Failure</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Perplexity Internals</span>
        

        
        <ul>
          
            <li><a href="/Perplexity/home/pxint/pxint0000Overview/">Overview</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0010PredicationContract/">The Predication Contract</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0020PythonBasics/">State and Python Basics</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0030ImplementPredication/">Implementing a Predication</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0040BuildSolver/">Initial Solver</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0050Conjunctions/">Solving Conjunctions</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0060ScopalArguments/">Solving Scopal Arguments</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0105ErrorsChoosingWhichFailure/">Choosing a Failure</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0110ErrorsReportingAFailure/">Naive Failures</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0120ErrorsConceptualFailures/">Words in Failures</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0130ErrorsRobustFailure/">Robust Failures</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0070GenerateMRSAndTrees/">Generating MRS and Trees</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0071WhichParseAndTree/">Choosing a Parse and Tree</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0080SimplePropositions/">Propositions</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0090SimpleQuestions/">Questions</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0100SimpleCommands/">Commands</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint03000PythonDecorators/">A. Python Decorators</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Using Perplexity</span>
        

        
        <ul>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo10Overview/">Overview</a></li>
          
            <li><a href="/Perplexity/home/pxHowTo/pxHowTo12Install/">Installing Perplexity</a></li>
          
            <li><a href="/Perplexity/home/pxHowTo/pxHowTo14HelloWorld/">Hello World</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo20ImplementAPredication/">Implementing a Predication</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo30InStylePredications/" class="active">In-Style Predications</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo40LiftStylePredications/">Lift-Style Predications</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo50EventPredications/">Event Predications</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo70ActionVerbs/">Verb Predications</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo80QuantifiersAndDeterminers/">Quantifiers and Determiners</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
        <h2 id="in-style-predications">In-Style Predications</h2>
<p>Logic gets more complicated when there is more than one <code class="language-plaintext highlighter-rouge">x</code> argument because there are many cases to handle. The ERG generates the following predication for “in” from “a file is in a folder”:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>_in_p_loc(e1,x1,x2)
</code></pre></div></div>
<p>Ignoring the event argument <code class="language-plaintext highlighter-rouge">e2</code> for the moment, there are two <code class="language-plaintext highlighter-rouge">x</code> arguments. The predication’s job is to check whether <code class="language-plaintext highlighter-rouge">x1</code> is “in” <code class="language-plaintext highlighter-rouge">x2</code> (whatever that means in the application). Because of combinatorial values (described in <a href="https://blog.inductorsoftware.com/Perplexity/home/pxhowto/pxHowTo20ImplementAPredication">the previous topic</a>), if the predication is called with two combinatorial arguments that have two values each, like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>_in_p_loc(e1,(file1, file2),(folder1, folder2))
</code></pre></div></div>

<p>… it will need to check all combinations of the first argument with the second, and yield any that are true, like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>check: (file1,) in (folder1,)?
check: (file1,) in (folder2,)?
check: (file2,) in (folder1,)?
check: (file2,) in (folder2,)?
check: (file1, file2) in (folder1,)?
check: (file1, file2) in (folder2,)?
check: (file1, file2) in (folder1, folder2)?
</code></pre></div></div>
<p>We can reduce the combinations that need to be checked by remembering that, when a variable has a set of more than one item, it means “together”.  So, <code class="language-plaintext highlighter-rouge">(file1, file2) in (folder1)?</code> means “are file1 and file2 in folder1 <em>together</em>?” For files, saying two files are in a folder “together” is no different than saying they are in a folder “separately”. If <code class="language-plaintext highlighter-rouge">file1</code> is in <code class="language-plaintext highlighter-rouge">folder1</code> and <code class="language-plaintext highlighter-rouge">file2</code> is in <code class="language-plaintext highlighter-rouge">folder2</code>, then they are both in there separately <em>and</em> together. Note that the meaning of “in” in this case also doesn’t <em>exclude</em> someone saying “together” or “separately”. It is perfectly fine to say “Are file1 and file2 in folder2 together?”, it just doesn’t add anything to the meaning.</p>

<p>This observation allows us to simplify the number of checks down to this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>check: (file1,) in (folder1,)?
check: (file1,) in (folder2,)?
check: (file2,) in (folder1,)?
check: (file2,) in (folder2,)?
</code></pre></div></div>

<p>If those are all true, then these must be too (without having to check):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>check: (file1, file2) in (folder1,)?
check: (file1, file2) in (folder2,)?
check: (file1, file2) in (folder1, folder2)?
</code></pre></div></div>

<p>This observation can greatly reduce the number of checks needed. If there are 10 files in <code class="language-plaintext highlighter-rouge">x1</code>, checking all combinations for even one folder would take <code class="language-plaintext highlighter-rouge">n^10 - 1 = 1023</code> checks! If we only check them individually, it only takes 10.</p>

<p>It should be noted that, even though we can avoid the checks for many sets, in theory we still have to yield all the possible combinations. In the next topic, we’ll walk through how to avoid this for many cases as well.</p>

<p>The logic for checking if variables have combinatorial values, doing the optimization above, and yielding the right values can be long and repetitive. So, like for the single <code class="language-plaintext highlighter-rouge">x</code> case from the <a href="https://blog.inductorsoftware.com/Perplexity/home/pxhowto/pxHowTo20ImplementAPredication">previous topic</a>, Perplexity has a helper function that performs the right logic and only requires the caller to implement the <code class="language-plaintext highlighter-rouge">check()</code> function, like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Predication(vocabulary, names=("_in_p_loc"))
def in_p_loc(state, e_introduced_binding, x_actor_binding, x_location_binding):
    def check_item_in_item(item1, item2):
        return is_item_in_item(item1, item2)
    
    ...

    yield from in_style_predication_2(state, 
                                      x_actor_binding, 
                                      x_location_binding, 
                                      check_item_in_item, 
                                      ...)
</code></pre></div></div>

<p>[The example uses a placeholder function <code class="language-plaintext highlighter-rouge">is_item_in_item(item1, item2)</code> to do the checking since its logic is application specific.]</p>

<p>The function is called <code class="language-plaintext highlighter-rouge">in_style_predication_2()</code> because it uses the behavior of “in” as a template and has two <code class="language-plaintext highlighter-rouge">x</code> arguments.  Any predication that is like “in” (meaning that it doesn’t have a different meaning for “together” or “separately” but is OK if they are said) can use this same helper to implement the logic efficiently.</p>

<h4 id="unbound-arguments">Unbound Arguments</h4>
<p>As discussed in the <a href="https://blog.inductorsoftware.com/Perplexity/home/pxhowto/pxHowTo20ImplementAPredication">previous topic</a>, arguments to a predication aren’t always set (i.e. <em>bound</em>) as in the above example. When they are missing, the predication needs to yield all possible values for them that make the predication <code class="language-plaintext highlighter-rouge">true</code>.</p>

<p>To support unbound arguments, <code class="language-plaintext highlighter-rouge">in_style_predication_2()</code> has two additional functions it supports: one for the first argument being unbound and another for the second. There is a final argument that is rarely used for when both are unbound. If that one isn’t set, the system reports the system error <code class="language-plaintext highlighter-rouge">beMoreSpecific</code> since the user said something really broad like “what is in anything?”</p>

<p>Presumably the system we are building would have an efficient way to find “things in something else” (or vice versa) so the example below uses fake functions as placeholders:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Predication(vocabulary, names=("_in_p_loc"))
def in_p_loc(state, e_introduced_binding, x_actor_binding, x_location_binding):
    def check_item_in_item(item1, item2):
        return is_item_in_item(item1, item2)
    
    def all_item1_in_item2(item2):
        yield from all_contained_in(item2)

    def all_item2_containing_item1(item1):
        yield from all_containing(item1)

    yield from in_style_predication_2(state, 
                                      x_actor_binding, 
                                      x_location_binding, 
                                      check_item_in_item, 
                                      all_item1_in_item2, 
                                      all_item2_containing_item1)
</code></pre></div></div>

<p>Note that the two new functions need to <em>yield all alternatives</em> and not just return <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code>, just like <code class="language-plaintext highlighter-rouge">combinatorial_style_predication_1()</code> did in the <a href="https://blog.inductorsoftware.com/Perplexity/home/pxhowto/pxHowTo20ImplementAPredication">previous topic</a>.</p>

<p>And, as with the first “check” function, <code class="language-plaintext highlighter-rouge">in_style_predication_2()</code> does all the work to make sure that the two unbound functions are only passed single values – even if the incoming values are combinatorial or sets &gt; 1 item.</p>

<p>Last update: 2023-05-15 by EricZinda [<a href="https://github.com/EricZinda/Perplexity/edit/main/docs/pxHowTo/pxHowTo30InStylePredications.md">edit</a>]</p>

        
      </section>

      <footer class="page__meta">
        
        


        


      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

<!--Scroll the navbar to the current page-->
<script type="text/javascript">
  let el = document.querySelector('.nav__list .active');
  if(el){
    el.scrollIntoView({block: "center", inline: "start"});
  }
</script>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    
      <li><a href="/Perplexity/home/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2023 Your Name. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/Perplexity/home/assets/js/main.min.js"></script>




<script src="/Perplexity/home/assets/js/lunr/lunr.min.js"></script>
<script src="/Perplexity/home/assets/js/lunr/lunr-store.js"></script>
<script src="/Perplexity/home/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
