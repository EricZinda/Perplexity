<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Perplexity</title>
<meta name="description" content="An amazing website.">


  <meta name="author" content="Your Name">
  


<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Perplexity">
<meta property="og:title" content="Perplexity">
<meta property="og:url" content="http://blog.inductorsoftware.com/Perplexity/home/pxhowto/pxHowTo100NonlogicalMeaning/">


  <meta property="og:description" content="An amazing website.">











  

  


<link rel="canonical" href="http://blog.inductorsoftware.com/Perplexity/home/pxhowto/pxHowTo100NonlogicalMeaning/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Your Name",
      "url": "http://blog.inductorsoftware.com/Perplexity/home/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/Perplexity/home/feed.xml" type="application/atom+xml" rel="alternate" title="Perplexity Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/Perplexity/home/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--delphin_page wide">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/Perplexity/home/"><img src="/Perplexity/home/assets/images/Delph-In.png" alt="Perplexity"></a>
        
        <a class="site-title" href="/Perplexity/home/">
          Perplexity
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="https://blog.inductorsoftware.com/Perplexity/home/devOverview">Home</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">Developer Tutorial Overview</span>
        

        
        <ul>
          
            <li><a href="/Perplexity/home/devOverview/">Overview</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">MRS Conceptual</span>
        

        
        <ul>
          
            <li><a href="/Perplexity/home/mrscon/devhowto0010MRS/">Minimal Recursion Semantics (MRS)</a></li>
          
            <li><a href="/Perplexity/home/mrscon/devhowto0020WellFormedTree/">Well-Formed Trees</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">MRS Solver Conceptual</span>
        

        
        <ul>
          
            <li><a href="/Perplexity/home/devcon/devcon0000Overview/">Overview</a></li>
          
            <li><a href="/Perplexity/home/devcon/devcon0010MRSSolver/">Backtracking</a></li>
          
            <li><a href="/Perplexity/home/devcon/devcon0020MRSSolverSets/">Representing 'Together'</a></li>
          
            <li><a href="/Perplexity/home/devcon/devcon0030MRSSolverSolutionGroups/">Collective, Distributive, Cumulative</a></li>
          
            <li><a href="/Perplexity/home/devcon/devcon0050MRSSolverSolutionCombinations/">Combinations and Proper Responses</a></li>
          
            <li><a href="/Perplexity/home/devcon/devcon0060WhichParseAndTree/">Choosing a Parse and Tree</a></li>
          
            <li><a href="/Perplexity/home/devcon/devcon0070SentenceForce/">Sentence Types</a></li>
          
            <li><a href="/Perplexity/home/devcon/devcon0080ErrorsChoosingWhichFailure/">Choosing a Failure</a></li>
          
            <li><a href="/Perplexity/home/devcon/devcon0040MRSSolverSolutionGroupsAlgorithm/">A. Optimizing Coll/Dist/Cuml</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Using Perplexity</span>
        

        
        <ul>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo010Overview/">Overview</a></li>
          
            <li><a href="/Perplexity/home/pxHowTo/pxHowTo012Install/">Installing Perplexity</a></li>
          
            <li><a href="/Perplexity/home/pxHowTo/pxHowTo014HelloWorld/">Hello World</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo020ImplementAPredication/">Implementing a Predication</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo022Testing/">Testing</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo030InStylePredications/">In-Style Predications</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo040LiftStylePredications/">Lift-Style Predications</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo050EventPredications/">Event Predications</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo070ActionVerbs/">Verb Predications</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo082State/">Custom State</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo085Place/">Representing Places</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo090Prepositions/">Directional Propositions</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo100NonlogicalMeaning/" class="active">Solution Group Handlers and Non-logical Meaning</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo105GlobalCriteria/">Solution Group Handlers and Global Criteria</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo110HandlingTenses/">Handling Tenses</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo120ConceptsReferringExpressions/">Conceptual References</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo080QuantifiersAndDeterminers/">Quantifiers and Determiners</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo130OpenClassWords/">Centralizing Nouns/Adjectives</a></li>
          
            <li><a href="/Perplexity/home/pxhowto/pxHowTo025SStrings/">A. Generating English with S-strings</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Perplexity Internals</span>
        

        
        <ul>
          
            <li><a href="/Perplexity/home/pxint/pxint0000Overview/">Overview</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0010PredicationContract/">The Predication Contract</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0020PythonBasics/">State and Python Basics</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0030ImplementPredication/">Implementing a Predication</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0040BuildSolver/">Initial Solver</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0050Conjunctions/">Solving Conjunctions</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0060ScopalArguments/">Solving Scopal Arguments</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0105ErrorsChoosingWhichFailure/">Choosing a Failure</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0110ErrorsReportingAFailure/">Naive Failures</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0120ErrorsConceptualFailures/">Words in Failures</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0130ErrorsRobustFailure/">Robust Failures</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0080SimplePropositions/">Propositions</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0090SimpleQuestions/">Questions</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0100SimpleCommands/">Commands</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0070GenerateMRSAndTrees/">Generating MRS and Trees</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint0071WhichParseAndTree/">Choosing a Parse and Tree</a></li>
          
            <li><a href="/Perplexity/home/pxint/pxint03000PythonDecorators/">A. Python Decorators</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
        <h2 id="solution-group-handlers-and-non-logical-meaning">Solution Group Handlers and Non-logical Meaning</h2>
<p>So far, all the examples we’ve built have a very “logical” behavior.  They are literally asking about things in the world, possibly in relation to other things. We ask about their existence, where they are, etc.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>? what file is large?
? a file is large
? where am i
? go to a folder
? students are lifting a table
? which students are lifting the table
</code></pre></div></div>

<p>The system “solves” the MRS by finding variable assignments that make it <code class="language-plaintext highlighter-rouge">true</code> and then gives built-in answers like “that is true” or lists what was requested.</p>

<p>Next, we are going to walk through how to implement phrases that aren’t logical in that same way.  For example, imagine we want to implement a rudimentary help system for our file system example and we’d like users to be able to ask for help using phrases too. To find out what they can do, a user might ask, “Do you have commands?”.</p>

<p>Here’s a quick overview of how: start by adding the notion of a “command” object into the system, creating one for each of the commands we have so far (“copy” and “go”) and implementing the new predications from the MRS, which are <code class="language-plaintext highlighter-rouge">_have_v_1</code> and <code class="language-plaintext highlighter-rouge">_command_n_1</code>, as you can see from the MRS:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[ "Do you have commands?"
  TOP: h0
  INDEX: e2 [ e SF: ques TENSE: pres MOOD: indicative PROG: - PERF: - ]
  RELS: &lt; [ pron&lt;3:6&gt; LBL: h4 ARG0: x3 [ x PERS: 2 IND: + PT: std ] ]
          [ pronoun_q&lt;3:6&gt; LBL: h5 ARG0: x3 RSTR: h6 BODY: h7 ]
          [ _have_v_1&lt;7:11&gt; LBL: h1 ARG0: e2 ARG1: x3 ARG2: x8 [ x PERS: 3 NUM: pl IND: + ] ]
          [ udef_q&lt;12:21&gt; LBL: h9 ARG0: x8 RSTR: h10 BODY: h11 ]
          [ _command_n_1&lt;12:20&gt; LBL: h12 ARG0: x8 ] &gt;
  HCONS: &lt; h0 qeq h1 h6 qeq h4 h10 qeq h12 &gt; ]

               ┌────── pron(x3)
pronoun_q(x3,RSTR,BODY)            ┌────── _command_n_1(x8)
                    └─ udef_q(x8,RSTR,BODY)
                                        └─ _have_v_1(e2,x3,x8)
</code></pre></div></div>

<p>Once we do that, the interaction will look like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>? Do you have commands?
Yes.

? Which commands do you have?
copy
go
</code></pre></div></div>

<p>You can almost hear the user say “Ugh! Dumb computer” after the first phrase.  A human would interpret that as “Tell me what commands you have, if you have them”.  This is known in linguistics as <a href="https://en.wikipedia.org/wiki/Pragmatics">“Pragmatics”</a>. The area of Pragmatics concerns the meaning of phrases that can’t be “logically” or “mechanically” interpreted since they require taking into account the context the phrase is uttered in and potentially taking some implied leaps to understand what is actually meant.</p>

<p>Making “Do you have commands?” actually say something custom and not purely give a logical response requires customizing how Perplexity responds when it finds a Solution Group. That is where we’ll finish.</p>

<h1 id="logical-interpretation">Logical Interpretation</h1>

<p>First let’s create a <code class="language-plaintext highlighter-rouge">FileCommand</code> class which represents commands in the system, using the <a href="https://blog.inductorsoftware.com/Perplexity/home/pxhowto/pxHowTo082State">same pattern</a> we used for the <code class="language-plaintext highlighter-rouge">File</code> and <code class="language-plaintext highlighter-rouge">Folder</code> classes:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class FileCommand(UniqueObject):
    def __init__(self, name):
        super().__init__()
        self.name = name
        self._hash = hash(self.name)

    def __hash__(self):
        return self._hash

    def __repr__(self):
        return f"Command(name={self.name})"

    def __eq__(self, obj):
        return isinstance(obj, FileCommand) and str(self.name) == str(obj.name)
</code></pre></div></div>

<p>Then, we need to add all the commands in the system to our state object, so they are returned when the system iterates through “all objects in the system” using the <code class="language-plaintext highlighter-rouge">State.all_individuals()</code> method:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
class FileSystemState(State):
    def __init__(self, file_system, current_user=None, actors=None):
        super().__init__([])
        self.file_system = file_system
        self.current_user = file_system_example.objects.Actor(name="User", person=1, file_system=file_system) if current_user is None else current_user
        self.actors = [self.current_user,
                       file_system_example.objects.Actor(name="Computer", person=2, file_system=file_system)] if actors is None else actors
        self.commands = [file_system_example.objects.FileCommand("copy"), file_system_example.objects.FileCommand("go")]
       
    def all_individuals(self):
        yield from self.file_system.all_individuals()
        yield from self.actors
        yield from self.commands 
        
    ...
</code></pre></div></div>

<p>With that in place, we implement the predication that is generated when the user utters “command” so the system will be able to fill variables with these objects:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Predication(vocabulary, names=["_command_n_1"])
def _command_n_1(context, state, x_binding):
    def bound_variable(value):
        if isinstance(value, file_system_example.objects.FileCommand):
            return True
        else:
            context.report_error(["valueIsNotX", value, x_binding.variable.name])
            return False

    def unbound_variable():
        for item in state.all_individuals():
            if bound_variable(item):
                yield item

    yield from combinatorial_predication_1(context,
                                           state,
                                           x_binding,
                                           bound_variable,
                                           unbound_variable)
</code></pre></div></div>

<p>And, finally, we can implement the <code class="language-plaintext highlighter-rouge">_have_v_1</code> predication, so that it is true only for 2nd person phrases like “do you have a command”, and so that the only thing anything “has” are commands:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Predication(vocabulary, names=["_have_v_1"])
def _have_v_1(context, state, e_introduced_binding, x_actor_binding, x_target_binding):
    def actor_have_target(item1, item2):
        if isinstance(item2, file_system_example.objects.FileCommand):
            return True
        else:
            context.report_error(["doNotHave", x_actor_binding.variable.name, x_target_binding.variable.name])
            return False

    def all_actors_having_target(item2):
        if False:
            yield None

    def all_targets_had_by_actor(item1):
        if False:
            yield None

    if x_actor_binding.value is not None and len(x_actor_binding.value) == 1 and x_actor_binding.value[0] == Actor(name="Computer", person=2):
        yield from in_style_predication_2(context,
                                          state,
                                          x_actor_binding,
                                          x_target_binding,
                                          actor_have_target,
                                          all_actors_having_target,
                                          all_targets_had_by_actor)

    else:
        context.report_error(["doNotHave", x_actor_binding.variable.name, x_target_binding.variable.name])
        return False
        
</code></pre></div></div>

<p>With that code, we can now make the first phrases work:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>? do you have commands?
Yes.

? which commands do you have?
(Command(name=copy),)(Command(name=go),
</code></pre></div></div>

<h1 id="pragmatic-interpretation">Pragmatic Interpretation</h1>
<p>As described in the <a href="https://blog.inductorsoftware.com/Perplexity/home/devcon/devcon0040MRSSolverSolutionGroupsAlgorithm">Solution Group Algorithm topic</a>, by default, when a solution group is found for a phrase, and the phrase is a yes/no question, Perplexity responds with “Yes.” To give a different response, we need to customize the way the system handles solution groups for this case.</p>

<p>To do this, we implement a <em>solution group handler</em>. It looks very much like the <code class="language-plaintext highlighter-rouge">have_v_1</code> handler above, with a few differences:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Predication(vocabulary,
             names=["solution_group__have_v_1"])
def _have_v_1_group(context, state_list, e_introduced_binding_list, x_actor_variable_group, x_target_variable_group):
    yield state_list
</code></pre></div></div>

<p>First, instead of using “<em>have_v_1” as the name, we prefix the name with “solution_group</em>” and use “solution_group__have_v_1” as the name. This tells the system we are implementing a solution group handler.</p>

<p>It has the same number of arguments as the “have_v_1” function, but, because this is handling a solution <em>group</em>, the arguments contain multiple items instead of one: one item for each solution in the group.</p>

<p>Implementing a solution group handler allows you to inspect each solution group that Perplexity finds and write custom logic to invalidate it or respond differently than the system would.  Yielding a list of state objects from the solution group handler indicates that this list of state objects is a valid solution group.  If nothing is yielded, the incoming list of state objects is invalidated and Perplexity continues looking for alternative solution groups.</p>

<p>As written in the code above, the Perplexity behavior won’t change since the code simply yields the solution group, as is. This indicates it is a valid solution group. Since the code doesn’t do anything to respond in a custom way, Perplexity continues responding with its default behavior.</p>

<p>If we want a different response, we could start by doing this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Predication(vocabulary,
             names=["solution_group__have_v_1"])
def _have_v_1_group(context, state_list, e_introduced_binding_list, x_actor_variable_group, x_target_variable_group):
    new_solution_group = [state_list[0].record_operations([RespondOperation("You can use the following commands: 'copy' and 'go'.")])]
    yield new_solution_group
</code></pre></div></div>

<p>Instead of yielding the original solution group, we now are only yielding the first solution … after modifying it to include a built-in operation called <code class="language-plaintext highlighter-rouge">RespondOperation</code>.  This is just like the <a href="https://blog.inductorsoftware.com/Perplexity/home/pxhowto/pxHowTo070ActionVerbs"><code class="language-plaintext highlighter-rouge">DeleteOperation</code></a> we created in an earlier section, but this operation’s job is to print text for the user.  Putting a <code class="language-plaintext highlighter-rouge">RespondOperation</code> in any of the state objects we yield tells the system that we want to override the default output.</p>

<p>So, now we get this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>? Do you have commands?
You can use the following commands: copy and go

? Which commands do you have?
You can use the following commands: copy and go
</code></pre></div></div>

<p>Because we are overriding the output, it really doesn’t matter that we are changing the list of state objects in the solution group. Since they were only used to generate the default output, Perplexity won’t pay attention to them anymore. Obviously we could instead run code to look up the commands in the system and dynamically build the string instead of hard coding it.</p>

<h1 id="concepts">Concepts</h1>
<p>While that works, it seems inefficient to have to create <code class="language-plaintext highlighter-rouge">FileCommand</code> objects, implement them in several places, have Perplexity go through the process of solving the MRS, only to throw it all way and print out a custom message! It turns out that work was not wasted. It would be required for other phrases like “Do you have a ‘copy’ command?” and many other scenarios.  But: it really is unnecessary to build up a solution group with all the commands to only throw it away for <em>this</em> scenario.</p>

<p>Instead, we can use another Perplexity feature called a “Concept” to make it more efficient.  The idea is that, sometimes, instead of Perplexity assigning actual objects to variables, we’d like the “concept” of them (called a <a href="https://en.wikipedia.org/wiki/Referring_expression"><code class="language-plaintext highlighter-rouge">referring expression</code></a> in linguistics) to be assigned.  I.e. instead of assigning <code class="language-plaintext highlighter-rouge">x8 = FileCommand('copy')</code>, we’d like to have <code class="language-plaintext highlighter-rouge">x8 = {representation of whatever they said before it got resolved into an actual object}</code> so that we can look at what they said “conceptually” instead of dealing with the actual instances of objects that it generated. This allows the solution group handler to just see if they are were talking about “you” having “the concept of commands” and, if so, generate the custom text.  This would be much more efficient.</p>

<p>To do this, we start adding an alternative <code class="language-plaintext highlighter-rouge">_command_n_1</code> predication since that is where the instances of commands get generated.  Perplexity allows adding more than one <em>interpretation</em> of a predication by creating more than one function and indicating that they use the same predication name. It treats them as <em>alternatives</em> and attempts to solve the MRS once using the first interpretation and then again using the next.</p>

<p>In the new interpretation, instead of yielding instances, we yield a <code class="language-plaintext highlighter-rouge">Concept("command")</code> object.  The <code class="language-plaintext highlighter-rouge">Concept</code> object in Perplexity literally does nothing except tell the system it is an opaque “Concept” object.  Here are both interpretations:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Predication(vocabulary, names=["_command_n_1"])
def _command_n_1_concept(context, state, x_binding):
    def bound_variable(value):
        if isinstance(value, Concept) and value == Concept("command"):
            return True
        else:
            context.report_error(["valueIsNotX", value, x_binding.variable.name])
            return False

    def unbound_variable():
        yield Concept("command")

    yield from combinatorial_predication_1(context,
                                           state,
                                           x_binding,
                                           bound_variable,
                                           unbound_variable)
                                           
                                               
@Predication(vocabulary, names=["_command_n_1"])
def _command_n_1(context, state, x_binding):
    def bound_variable(value):
        if isinstance(value, file_system_example.objects.FileCommand):
            return True
        else:
            context.report_error(["valueIsNotX", value, x_binding.variable.name])
            return False

    def unbound_variable():
        for item in state.all_individuals():
            if bound_variable(item):
                yield item

    yield from combinatorial_predication_1(context,
                                           state,
                                           x_binding,
                                           bound_variable,
                                           unbound_variable)
</code></pre></div></div>
<p>With that in place, we’ll first get a set of solution groups that have the <code class="language-plaintext highlighter-rouge">Concept("command")</code> object assigned to variables. Perplexity will do nothing with the <code class="language-plaintext highlighter-rouge">Concept</code> object except recognize that it is one and disable its logic to do any <a href="https://blog.inductorsoftware.com/Perplexity/home/devcon/devcon0030MRSSolverSolutionGroups">collective/cumulative/distributive</a> solution group testing.  Instead, it will still create <em>all potential</em> solution groups and call your solution group handler.  It is now up to you to decide if they are valid readings. For this case it will be simple since we are going to treat any phrase of the form “Do you have {x} commands?” as a request to see the help string. That includes any of these:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Do you have commands?
Do you have 2 commands?
Do you have several commands?
Do you have any commands?
etc.
</code></pre></div></div>

<p>Next, recall that the implementation of <code class="language-plaintext highlighter-rouge">_have_v_1</code> only succeeds if the arguments are of type <code class="language-plaintext highlighter-rouge">FileCommand</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**@Predication(vocabulary, names=["_have_v_1"])
def _have_v_1(context, state, e_introduced_binding, x_actor_binding, x_target_binding):
    def actor_have_target(item1, item2):
        if isinstance(item2, file_system_example.objects.FileCommand):
            return True
        else:
            context.report_error(["doNotHave", x_actor_binding.variable.name, x_target_binding.variable.name])
            return False

    ...
    
    if x_actor_binding.value is not None and len(x_actor_binding.value) == 1 and x_actor_binding.value[0] == Actor(name="Computer", person=2):
        yield from in_style_predication_2(context,
                                          state,
                                          x_actor_binding,
                                          x_target_binding,
                                          actor_have_target,
                                          all_actors_having_target,
                                          all_targets_had_by_actor)**

    else:
        context.report_error(["doNotHave", x_actor_binding.variable.name, x_target_binding.variable.name])
        return False                                       
</code></pre></div></div>

<p>This means it will fail when Perplexity attempts to solve it using the new <code class="language-plaintext highlighter-rouge">Concept</code> object.  So, we need a new interpretation of <code class="language-plaintext highlighter-rouge">_have_v_1</code> as well:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Predication(vocabulary, names=["_have_v_1"])
def _have_v_1_concept(context, state, e_introduced_binding, x_actor_binding, x_target_binding):
    def actor_have_target(item1, item2):
        if isinstance(item2, Concept) and item2 == Concept("command"):
            return True
        else:
            context.report_error(["doNotHave", x_actor_binding.variable.name, x_target_binding.variable.name])
            return False

    def all_actors_having_target(item2):
        if False:
            yield None

    def all_targets_had_by_actor(item1):
        if False:
            yield None

    if x_actor_binding.value is not None and len(x_actor_binding.value) == 1 and x_actor_binding.value[0] == Actor(name="Computer", person=2):
        yield from in_style_predication_2(context,
                                          state,
                                          x_actor_binding,
                                          x_target_binding,
                                          actor_have_target,
                                          all_actors_having_target,
                                          all_targets_had_by_actor)

    else:
        context.report_error(["doNotHave", x_actor_binding.variable.name, x_target_binding.variable.name])
        return False
</code></pre></div></div>

<p>Finally, we want to change our solution group handler to only be used when the conceptual interpretation is used. We’ll let perplexity handle the original interpretation. To do this, we set the <code class="language-plaintext highlighter-rouge">handles_interpretation</code> argument of the <code class="language-plaintext highlighter-rouge">Predication</code> class to point to the interpretation we want to pair it with, like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Predication(vocabulary,
             names=["solution_group__have_v_1"],
             handles_interpretation=_have_v_1_concept)
def _have_v_1_group(context, state_list, e_introduced_binding_list, x_actor_variable_group, x_target_variable_group):
    yield [state_list[0].record_operations([RespondOperation("You can use the following commands: copy and go")])]
</code></pre></div></div>

<p>Now, we can try all the phrases below:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>? which commands do you have?
You can use the following commands: copy and go

? do you have a command?
You can use the following commands: copy and go

? do you have 2 commands?
You can use the following commands: copy and go

? do I have a command?
you do not have a command

? do I have a file?
you do not have a file

? do you have a file?
us do not have a file
</code></pre></div></div>

<h3 id="final-loose-ends">Final Loose Ends</h3>
<p>Three things to note here:</p>

<p>First, all those phrases end up using the conceptual interpretation. The instance-based interpretation is currently unused. The most likely use for it would be for phrases like “Do you have a copy command?” or “How do I use the copy command?”, i.e. in phrases where the user is talking about a particular instance, and not the general concept of commands.</p>

<p>Second, there also a whole set of phrases that happen to work that probably shouldn’t:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>? did you have a command?
You can use the following commands: copy and go

? you are having a command?
You can use the following commands: copy and go

? Are you having a command?
You can use the following commands: copy and go
</code></pre></div></div>

<p>Finally, there are some phrases that point to another area we need to focus on, global criteria:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>? Do you have 3 commands?
You can use the following commands: copy and go

? Do you have many commands?
You can use the following commands: copy and go

? Do you have several commands?
You can use the following commands: copy and go
</code></pre></div></div>

<p>All of these phrases are using words like “several” or “3” which quantify how many of something the speaker is interested in. When we implement a solution group handler we take over responsibility for doing the counting, and we’re not doing that.  Let’s do that next.</p>

<p>Last update: 2024-10-11 by Eric Zinda [<a href="https://github.com/EricZinda/Perplexity/edit/main/docs/pxHowTo/pxHowTo100NonlogicalMeaning.md">edit</a>]</p>

        
      </section>

      <footer class="page__meta">
        
        


        


      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

<!--Scroll the navbar to the current page-->
<script type="text/javascript">
  let el = document.querySelector('.nav__list .active');
  if(el){
    el.scrollIntoView({block: "center", inline: "start"});
  }
</script>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    
      <li><a href="/Perplexity/home/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2024 Your Name. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/Perplexity/home/assets/js/main.min.js"></script>




<script src="/Perplexity/home/assets/js/lunr/lunr.min.js"></script>
<script src="/Perplexity/home/assets/js/lunr/lunr-store.js"></script>
<script src="/Perplexity/home/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
